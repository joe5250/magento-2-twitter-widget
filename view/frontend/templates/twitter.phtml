<?php
/**
 * Mageplaza
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Mageplaza
 * @package     Mageplaza_TwitterWidget
 * @copyright   Copyright (c) Mageplaza (https://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */

/** @var Mageplaza\TwitterWidget\Block\Widget $block */
if ($block->isEnable()) :
    $widgetId = uniqid();
    $options = $block->getAllOptions();
    $url = $block->getData('tweet_url') ?: $block->getData('timeline_url');
    ?>

    <div class="mptwitterwidget-container">
        <div class="mptwitterwidget-header">
            <h3><?php echo __($block->getData('title')) ?></h3>
            <div><?php echo __($block->getData('description')) ?></div>
        </div>
        <div id="mptwitterwidget-block-<?php echo $widgetId ?>">
            <div id="mptwitterwidget-follow-btn-<?php echo $widgetId ?>"></div>
            <div id="mptwitterwidget-load-<?php echo $widgetId ?>"
                 style="font-size: medium;"><?= __('Loading...'); ?></div>
        </div>
    </div>
    <script type="text/x-magento-init">
    {
        "#mptwitterwidget-block-<?php echo $widgetId ?>": {
            "Mageplaza_TwitterWidget/js/twitter": {
                "id": "<?php echo $widgetId ?>",
                "url": "<?php echo $url ?>",
                "params": <?php echo $options ?>
            }
        }
    }
    </script>
    <style type="text/css">
        .mptwitterwidget-header {
            width: <?php echo $block->getData('width') . 'px'?>;
            margin: 10px;
        }

        @media (max-width: 767px) {
            .mptwitterwidget-header {
                width: auto;
            }
        }
    </style>
<?php endif; ?>
